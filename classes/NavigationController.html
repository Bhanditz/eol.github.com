<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>Class: NavigationController [Rails Application Documentation]</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='.././rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          NavigationController
        </h1>
        <ol class='paths'>
          <li>
            <a href="../files/app/controllers/navigation_controller_rb.html">app/controllers/navigation_controller.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong><a href="ApplicationController.html">ApplicationController</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000044">flash_tree_view</a></li>
              <li><a href="#M000045">set_default_taxonomic_browser</a></li>
              <li><a href="#M000042">show_tree_view</a></li>
              <li><a href="#M000043">show_tree_view_for_selection</a></li>
            </ol>
            <h3>protected instance</h3>
            <ol>
              <li><a href="#M000046">load_taxon_for_tree_view</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='methods'>
              <h2>Public instance methods</h2>
              <div class='public-instance method' id='method-M000044'>
                <a name='M000044'>      </a>
                <div class='synopsis'>
                  <span class='name'>flash_tree_view</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Flash requires an additional product (flash remoting mx components) to do
                  remote web service requests so we just want to pass through the remote
                  response as if it were local Accessed via /flashxml/:taxon_id.xml
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000044-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000044-source'>    <span class="ruby-comment cmt"># File app/controllers/navigation_controller.rb, line 18</span>&#x000A;18:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">flash_tree_view</span>&#x000A;19:     <span class="ruby-comment cmt"># @taxon  = TaxonConcept.find(params[:id])</span>&#x000A;20:     <span class="ruby-comment cmt">#     @taxon.current_user = current_user</span>&#x000A;21:     <span class="ruby-comment cmt">#     #TODO - something with params like this: raw_xml = @taxon.entry(params[:classifcation_id]).classification(:raw =&gt; true, :kingdoms=&gt;true)</span>&#x000A;22:     <span class="ruby-comment cmt">#     raw_xml = @taxon.entry.classification(:raw =&gt; true, :kingdoms=&gt;true)</span>&#x000A;23:     <span class="ruby-comment cmt">#     raw_xml.gsub!('&amp;lt;i&amp;gt;','') if raw_xml.nil? == false</span>&#x000A;24:     <span class="ruby-comment cmt">#     raw_xml.gsub!('&amp;lt;/i&amp;gt;','') if raw_xml.nil? == false</span>&#x000A;25:     <span class="ruby-comment cmt">#     respond_to do |format|</span>&#x000A;26:     <span class="ruby-comment cmt">#       format.xml { render :xml =&gt; raw_xml }</span>&#x000A;27:     <span class="ruby-comment cmt">#     end</span>&#x000A;28:     &#x000A;29:     <span class="ruby-identifier">id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>] <span class="ruby-keyword kw">rescue</span> <span class="ruby-value">0</span>&#x000A;30:     &#x000A;31:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>&#x000A;32:       <span class="ruby-identifier">raw_xml</span> = <span class="ruby-value str">&quot;&quot;</span>;&#x000A;33:     <span class="ruby-keyword kw">else</span>&#x000A;34:       <span class="ruby-ivar">@entry</span>  = <span class="ruby-constant">HierarchyEntry</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">id</span>)&#x000A;35:       <span class="ruby-comment cmt">#@entry.current_user = current_user</span>&#x000A;36:       <span class="ruby-comment cmt">#TODO - something with params like this: raw_xml = @taxon.entry(params[:classifcation_id]).classification(:raw =&gt; true, :kingdoms=&gt;true)</span>&#x000A;37:       <span class="ruby-identifier">raw_xml</span> = <span class="ruby-ivar">@entry</span>.<span class="ruby-identifier">classification</span>(<span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:kingdoms=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">true</span>)&#x000A;38:       <span class="ruby-identifier">raw_xml</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-value str">'&amp;lt;i&amp;gt;'</span>,<span class="ruby-value str">''</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">raw_xml</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>&#x000A;39:       <span class="ruby-identifier">raw_xml</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-value str">'&amp;lt;/i&amp;gt;'</span>,<span class="ruby-value str">''</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">raw_xml</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>&#x000A;40:     <span class="ruby-keyword kw">end</span>&#x000A;41:     &#x000A;42:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>&#x000A;43:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">raw_xml</span> }&#x000A;44:     <span class="ruby-keyword kw">end</span>&#x000A;45:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000045'>
                <a name='M000045'>      </a>
                <div class='synopsis'>
                  <span class='name'>set_default_taxonomic_browser</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  AJAX call to set default taxonomic browser in session and save to profile
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000045-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000045-source'>    <span class="ruby-comment cmt"># File app/controllers/navigation_controller.rb, line 48</span>&#x000A;48:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_default_taxonomic_browser</span>&#x000A;49:     &#x000A;50:         <span class="ruby-identifier">browser</span>=<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:browser</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">$DEFAULT_TAXONOMIC_BROWSER</span>&#x000A;51:         <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">default_taxonomic_browser</span>=<span class="ruby-identifier">browser</span>&#x000A;52:         <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">save</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logged_in?</span>&#x000A;53:         <span class="ruby-identifier">render</span> <span class="ruby-identifier">:nothing=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">true</span>&#x000A;54:         &#x000A;55:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000042'>
                <a name='M000042'>      </a>
                <div class='synopsis'>
                  <span class='name'>show_tree_view</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  caches_page :<a
                  href="NavigationController.html#M000044">flash_tree_view</a>
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000042-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000042-source'>   <span class="ruby-comment cmt"># File app/controllers/navigation_controller.rb, line 5</span>&#x000A;5:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">show_tree_view</span>&#x000A;6:     <span class="ruby-identifier">load_taxon_for_tree_view</span>&#x000A;7:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'tree_view'</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:current_user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">current_user</span> }&#x000A;8:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000043'>
                <a name='M000043'>      </a>
                <div class='synopsis'>
                  <span class='name'>show_tree_view_for_selection</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000043-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000043-source'>    <span class="ruby-comment cmt"># File app/controllers/navigation_controller.rb, line 10</span>&#x000A;10:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">show_tree_view_for_selection</span>&#x000A;11:     <span class="ruby-identifier">load_taxon_for_tree_view</span>&#x000A;12:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'tree_view_for_selection'</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:current_user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">current_user</span> }&#x000A;13:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Protected instance methods</h2>
              <div class='protected-instance method' id='method-M000046'>
                <a name='M000046'>      </a>
                <div class='synopsis'>
                  <span class='name'>load_taxon_for_tree_view</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000046-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000046-source'>    <span class="ruby-comment cmt"># File app/controllers/navigation_controller.rb, line 59</span>&#x000A;59:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">load_taxon_for_tree_view</span>&#x000A;60:     <span class="ruby-ivar">@taxon_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>]&#x000A;61:     <span class="ruby-ivar">@taxon</span> = <span class="ruby-constant">TaxonConcept</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@taxon_id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:names</span>])    &#x000A;62:     <span class="ruby-ivar">@taxon</span>.<span class="ruby-identifier">current_user</span> = <span class="ruby-identifier">current_user</span>&#x000A;63:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
